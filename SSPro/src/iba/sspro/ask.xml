<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" 
       "http://www.ibatis.com/dtd/sql-map-2.dtd" >
       
<sqlMap namespace="ask">

  <insert id="insert" parameterClass="sspro.vo.AskVO">
  insert into member_space (ask_id, ask_startdate, ask_finishdate, ask_memo, ask_image1,ask_image2,ask_image3,
                            amember_id,spacepost_id,ask_state) 
                   values ('A'||lpad(seq_A.nextval,3,0),#ask_startdate# ,#ask_finishdate#,#ask_memo#,
                   #ask_image1#,#ask_image2#,#ask_image3#,#amember_id#,#spacepost_id#,'대기')         
  </insert>
  
  <select id="select" parameterClass="String" resultClass="sspro.vo.AskVO">
   select ask_id, ask_startdate, ask_finishdate, ask_memo, ask_image1,ask_image2,ask_image3, amember_id, spacepost_id, ask_state
   from ask where ask_id=#ask_id#    
  </select>
  
  <select id="selectAll" resultClass="sspro.vo.AskVO">
   select ask_id, ask_startdate, ask_finishdate, ask_memo, ask_image1, ask_image2, ask_image3, amember_id,spacepost_id,ask_state
   from ask 
  </select>	

  <delete id="delete" parameterClass="String">
    delete ask where ask_id=#ask_id# 
  </delete>
  
  <update id="update" parameterClass="sspro.vo.AskVO">
   update ask 
   set ask_startdate=#ask_startdate#
       ask_finishdate=#ask_finishdate#
       ask_memo=#ask_memo#
       ask_image1=#ask_image1#
       ask_image2=#ask_image2#
       ask_image3=#ask_image3#
   where where ask_id=#ask_id#                   
  </update>
  
  <select id="selectArtistAsk" parameterClass="String" resultClass="sspro.vo.AskVO">
  	select * from ASK natural join MEMBER_ARTIST where AMEMBER_EMAIL like #AMEMBER_EMAIL#
  </select>
  
  <select id="selectSpaceAsk" resultClass="sspro.vo.SpacePostVO">
  	select * from ASK natural join SPACEPOST
  </select>
  
 <!--  <update id="stateupdate" parameterClass="sspro.vo.AskVO">보류 
  	update ask set ASK_STATE=#ask_state# where ask_id=#ask_id# 
  </update> -->
  
</sqlMap>